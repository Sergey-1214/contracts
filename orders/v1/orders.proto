syntax = "proto3";

package orders.v1;

option go_package = "github.com/Sergey-1214/contracts/orders/v1;ordersv1";
service OrdersService {
    rpc CreateOrder(CreateOrderRequest) returns (CreateOrderResponse);
    rpc GetOrder(GetOrderRequest) returns (GetOrderResponse);
    rpc UpdateStatus(UpdateStatusRequest) returns (UpdateStatusResponse);
}

enum OrderStatus {
    ORDER_STATUS_UNSPECIFIED = 0;
    ORDER_STATUS_PENDING = 1;
    ORDER_STATUS_CONFIRMED = 2;
    ORDER_STATUS_PROCESSING = 3;
    ORDER_STATUS_DELIVERED = 4;
    ORDER_STATUS_CANCELLED = 5;
  }

message CreateOrderRequest {
    string user_id = 1;
    repeated OrderItem order_item = 2;
}

message CreateOrderResponse {
    int64 order_id = 1;
    OrderStatus status = 2;
}

message GetOrderRequest {
    int64 order_id = 1;
}

message GetOrderResponse {
    Order order = 1;
}

message UpdateStatusRequest {
    int64 order_id = 1;
    OrderStatus status = 2;
}

message UpdateStatusResponse {
    int64 order_id = 1;
    OrderStatus status = 2;
}

message OrderItem {
    int64 product_id = 1;
    int64 quantity = 2;
    double price = 3;
}

message Order {
    int64 order_id = 1;
    double total_amount = 2;
    OrderStatus status = 3;
    string created_at = 4;
}